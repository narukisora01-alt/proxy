<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Roblox Follow Checker</title>
</head>
<body>
    <script>
        async function checkFollowing(userId, targetUserId) {
            try {
                const response = await fetch(`https://friends.roblox.com/v1/users/${userId}/followings?sortOrder=Desc&limit=100`);
                const data = await response.json();
                
                if (data && data.data) {
                    const isFollowing = data.data.some(following => following.id === parseInt(targetUserId));
                    return { success: true, isFollowing: isFollowing };
                }
                return { success: false, error: "Invalid response" };
            } catch (error) {
                return { success: false, error: error.message };
            }
        }

        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('userId');
        const targetUserId = urlParams.get('targetUserId');

        if (userId && targetUserId) {
            checkFollowing(userId, targetUserId).then(result => {
                document.body.innerHTML = JSON.stringify(result);
            });
        } else {
            document.body.innerHTML = JSON.stringify({ success: false, error: "Missing parameters. Use ?userId=X&targetUserId=Y" });
        }
    </script>
</body>
</html>
